p8105\_hw2\_wq2160
================
Wenshan Qu (wq2160)
10/8/2021

## Problem 1

Read and clean the Mr. Trash Wheel data set.

``` r
trash_wheel = 
  read_excel("./data_1/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = 1, range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  drop_na(month) %>% 
  mutate(
    sports_balls = as.integer(round(sports_balls))
  )

trash_wheel
```

    ## # A tibble: 453 × 14
    ##    dumpster month  year date                weight_tons volume_cubic_yards
    ##    <chr>    <chr> <dbl> <dttm>                    <dbl>              <dbl>
    ##  1 1        May    2014 2014-05-16 00:00:00        4.31                 18
    ##  2 2        May    2014 2014-05-16 00:00:00        2.74                 13
    ##  3 3        May    2014 2014-05-16 00:00:00        3.45                 15
    ##  4 4        May    2014 2014-05-17 00:00:00        3.1                  15
    ##  5 5        May    2014 2014-05-17 00:00:00        4.06                 18
    ##  6 6        May    2014 2014-05-20 00:00:00        2.71                 13
    ##  7 7        May    2014 2014-05-21 00:00:00        1.91                  8
    ##  8 8        May    2014 2014-05-28 00:00:00        3.7                  16
    ##  9 9        June   2014 2014-06-05 00:00:00        2.52                 14
    ## 10 10       June   2014 2014-06-11 00:00:00        3.76                 18
    ## # … with 443 more rows, and 8 more variables: plastic_bottles <dbl>,
    ## #   polystyrene <dbl>, cigarette_butts <dbl>, glass_bottles <dbl>,
    ## #   grocery_bags <dbl>, chip_bags <dbl>, sports_balls <int>,
    ## #   homes_powered <dbl>

Read and clean the precipitation data for 2018.

``` r
pre_18 = 
  read_excel("./data_1/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "2018 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = c("2018")
  )

pre_18
```

    ## # A tibble: 12 × 3
    ##    month total year 
    ##    <dbl> <dbl> <chr>
    ##  1     1  0.94 2018 
    ##  2     2  4.8  2018 
    ##  3     3  2.69 2018 
    ##  4     4  4.69 2018 
    ##  5     5  9.27 2018 
    ##  6     6  4.77 2018 
    ##  7     7 10.2  2018 
    ##  8     8  6.45 2018 
    ##  9     9 10.5  2018 
    ## 10    10  2.12 2018 
    ## 11    11  7.82 2018 
    ## 12    12  6.11 2018

Read and clean the precipitation data for 2019.

``` r
pre_19 = 
  read_excel("./data_1/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = "2019 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = c("2019")
  )

pre_19
```

    ## # A tibble: 12 × 3
    ##    month total year 
    ##    <dbl> <dbl> <chr>
    ##  1     1  3.1  2019 
    ##  2     2  3.64 2019 
    ##  3     3  4.47 2019 
    ##  4     4  1.46 2019 
    ##  5     5  3.58 2019 
    ##  6     6  0.42 2019 
    ##  7     7  3.85 2019 
    ##  8     8  2.39 2019 
    ##  9     9  0.16 2019 
    ## 10    10  5.45 2019 
    ## 11    11  1.86 2019 
    ## 12    12  3.57 2019

Combine precipitation data sets of 2018 and 2019.

``` r
pre_1819 = 
  left_join(pre_18, pre_19, by = "month") %>% 
  mutate(
    month = month.name[month]
  ) %>% 
  relocate(month, year.x, total.x, year.y, total.y)

pre_1819
```

    ## # A tibble: 12 × 5
    ##    month     year.x total.x year.y total.y
    ##    <chr>     <chr>    <dbl> <chr>    <dbl>
    ##  1 January   2018      0.94 2019      3.1 
    ##  2 February  2018      4.8  2019      3.64
    ##  3 March     2018      2.69 2019      4.47
    ##  4 April     2018      4.69 2019      1.46
    ##  5 May       2018      9.27 2019      3.58
    ##  6 June      2018      4.77 2019      0.42
    ##  7 July      2018     10.2  2019      3.85
    ##  8 August    2018      6.45 2019      2.39
    ##  9 September 2018     10.5  2019      0.16
    ## 10 October   2018      2.12 2019      5.45
    ## 11 November  2018      7.82 2019      1.86
    ## 12 December  2018      6.11 2019      3.57

The **number of observation** in trash wheel dataset is
`nrow(trash_wheel)`; in 2018 Precipitation is `nrow(pre_18)`, and in
2019 Precipitation is `nrow(pre_19)`, in combination set of 2018 and
2019 precipitation is `nrow(pre_1819)`.

The **key variables** in trash wheel is `names(trash_wheel)`, in 2018
Precipitation is `names(pre_18)`, in 2019 Precipitation is
`names(pre_19)`, and in combination set of 2018 and 2019 precipitation
is `names(pre_1819)`.

The **total precipitation** in 2018 is `sum(pull(pre_18, total))`, in
2019 is `sum(pull(pre_19, total))`. And the information get from
`pre_1819` is that the precipitation amount in 2019 is much lower than
2018, and this trend is extremely obvious during summer time (from April
to September).

The **median number of sports balls** in a dumpster in 2019 is
`filter(trash_wheel, year == "2019") %>% pull(sports_balls) %>% median()`.

## Problem 2

Clean and modify the pols-month data set.

``` r
pols_df = 
  read.csv("./data_2/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    day = as.integer(day)
  ) %>% 
  mutate(
    month = month.name[month] ## replace month number with month name 
  ) %>% 
  select(- day) %>% 
  relocate(year, month, prez_gop, prez_dem) %>% 
  mutate(
    prez_gop = na_if(prez_gop, 0),
    prez_dem = na_if(prez_dem, 0)  ## convert value "0" to NA for future manipulation
  ) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "name", 
    names_prefix = "prez_",
    values_to = "president"
  ) %>% 
  drop_na() %>% ## only remain one row (whether dem or gop) for each month of year
  select(- president) %>% ## clean the 0 and 1 value because it's meaningless, only reserve the "dem" or "gop" value
  rename(president = name) %>% ## rename the column containing what we need as president
  select(year, month, president, everything())

pols_df
```

    ## # A tibble: 822 × 9
    ##     year month     president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <int> <chr>     <chr>       <int>   <int>   <int>   <int>   <int>   <int>
    ##  1  1947 January   dem            23      51     253      23      45     198
    ##  2  1947 February  dem            23      51     253      23      45     198
    ##  3  1947 March     dem            23      51     253      23      45     198
    ##  4  1947 April     dem            23      51     253      23      45     198
    ##  5  1947 May       dem            23      51     253      23      45     198
    ##  6  1947 June      dem            23      51     253      23      45     198
    ##  7  1947 July      dem            23      51     253      23      45     198
    ##  8  1947 August    dem            23      51     253      23      45     198
    ##  9  1947 September dem            23      51     253      23      45     198
    ## 10  1947 October   dem            23      51     253      23      45     198
    ## # … with 812 more rows
